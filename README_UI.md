# 量子态层析数据处理工具 - UI版本

## 概述

这是一个MATLAB图形用户界面(GUI)工具，用于量子态层析数据的处理和分析。该工具提供了友好的界面来替代原有的命令行脚本，支持批量处理数据文件并生成多种格式的结果输出。

## 功能特性

- **图形用户界面**: 易于使用的参数配置界面
- **批量处理**: 支持批量处理多个数据文件
- **多格式支持**: 支持CSV和XLSX输入文件格式
- **实时进度显示**: 显示处理进度和当前文件状态
- **配置保存**: 支持保存和加载默认配置
- **多种输出格式**: 生成MATLAB、Excel、图像和文本多种格式的结果

## 系统要求

- MATLAB R2018a 或更高版本
- 必要的量子层析处理函数:
  - `reconstruct_density_matrix_nD`
  - `likelihood_function`
  - `reconstruct_density_matrix_nD_MLE`

## 安装和使用

### 1. 启动程序

在MATLAB命令行中运行以下任一命令:
```matlab
run_ui
```
或
```matlab
quantum_tomography_ui
```

### 2. 界面说明

#### 输入设置
- **数据路径**: 点击"浏览文件夹"选择包含数据文件的文件夹
- **文件类型**: 选择CSV或XLSX格式
- **列号**: 指定要读取的数据列号（从1开始）
- **维度**: 设置量子态的维度（必须≥2的整数）
- **文件编号范围**: 设置要处理的文件编号范围（基于文件名的最后两位数字）

#### 输出设置
- **保存路径**: 点击"浏览文件夹"选择结果保存位置

#### 操作控制
- **保存为默认配置**: 将当前参数保存为默认值，下次启动时自动加载
- **开始处理**: 开始批量处理数据
- **退出**: 关闭程序

#### 进度显示
- **当前文件**: 显示正在处理的文件名
- **进度条**: 显示整体处理进度
- **处理日志**: 显示详细的处理过程和结果信息

## 输出文件说明

对于编号为N的文件，程序将生成以下输出文件:

### 1. 密度矩阵文件
- `rho_matrix_N.mat`: MATLAB格式的密度矩阵和计算结果
- `rho_matrix_N.xlsx`: Excel格式的密度矩阵（实部和虚部分别保存在不同sheet中）

### 2. 可视化图像
- `file_N_amplitude.png`: 密度矩阵振幅信息的3D柱状图
- `file_N_phase.png`: 密度矩阵相位信息的3D柱状图

### 3. 结果记录
- `results_N.txt`: 包含以下信息的文本文件:
  - 处理时间
  - Chi²值（线性求解和最大似然法）
  - 纯度值
  - 密度矩阵的详细数值（实部、虚部、复数形式）

## 文件命名规则

程序根据输入文件名的数字部分（去掉扩展名）的最后两位来确定文件编号。

例如:
- `12345.csv` → 编号45
- `test001.xlsx` → 编号01
- `data_099.csv` → 编号99

## 使用流程

1. **启动程序**: 运行`run_ui`命令
2. **配置参数**: 
   - 选择数据文件夹
   - 设置文件类型和列号
   - 设置维度和文件编号范围
   - 选择保存路径
3. **保存配置**: （可选）点击"保存为默认配置"
4. **开始处理**: 点击"开始处理"按钮
5. **监控进度**: 观察进度条和日志信息
6. **查看结果**: 处理完成后在保存路径中查看生成的文件

## 注意事项

1. **文件格式**: 确保输入文件的格式正确，CSV文件不包含表头，XLSX文件可以包含表头
2. **列号验证**: 程序会自动检查指定的列号是否存在于文件中
3. **维度设置**: 维度必须与数据的实际维度相匹配
4. **路径权限**: 确保对输入和输出路径有足够的读写权限
5. **内存使用**: 处理大量文件时注意内存使用情况

## 故障排除

### 常见问题

1. **"函数未找到"错误**: 确保必要的量子层析函数在MATLAB路径中
2. **"文件读取失败"**: 检查文件格式和列号设置
3. **"保存失败"**: 检查保存路径的写入权限
4. **界面无响应**: 处理大文件时可能需要等待，观察日志输出

### 错误日志

程序会在处理日志中显示详细的错误信息，有助于诊断问题。

## 更新历史

- v1.0: 初始版本，包含基本的UI功能和批量处理能力

## 联系信息

如有问题或建议，请联系开发团队。
